## 📅 项目启动与基础工作流总结 (UE4 + C++)

### 1\. 项目创建标准 (必读)

为了配合只有 3 人的 Git 协作环境，以及满足课程对 C++ 代码量的要求，我们统一使用以下设置：

-   **模板**：Blank (空项目)
    
-   **语言**：C++ (非纯蓝图)
    
-   **初学者包 (Starter Content)**：**【不要勾选】(No Starter Content)**
    
    -   **原因**：初学者包有 600MB+ 的美术垃圾文件，会导致 Git 仓库爆炸，且拉取极其缓慢。
        
    -   **误区澄清**：不选初学者包**完全不影响**写 C++ 代码或继承引擎类（如 ACharacter）。
        
    -   **美术替代**：前期用 Cube/Sphere 白模占位，后期去 Mixamo 下个免费模型拖进去即可。
        
    

### 2\. 核心开发范式 (黄金法则)

为了拿高分（体现 OOP 设计能力）并利用 UE4 的便利性，我们要遵守：

> **C++ 负责逻辑 (Brain) + 蓝图 负责配置 (Skin)**

-   **错误做法**：在场景里直接拼凑 Cube，在关卡蓝图里连线写逻辑（0分）。
    
-   **错误做法**：在 C++ 里硬编码加载模型路径（低效，难维护）。
    
-   **正确做法**：
    
    -   **C++**：定义类 (ABaseBuilding)，声明组件 (MeshComp)，写核心函数 (Attack, TakeDamage)。
        
    -   **蓝图**：继承自 C++ 类，在编辑器里指定模型长什么样（方块/圆柱），设置血量数值（100/500）。
        
    -   **场景**：把配好的蓝图拖进去。
        
    

### 3\. 我们已经跑通的第一个功能：点击销毁方块

我们成功实现了从代码到画面的闭环。

#### A. C++ 部分 (Visual Studio)

我们创建了 BaseBuilding 类：

-   **头文件 (.h)**：用来“点菜”，声明变量和函数。
    
    -   关键宏：UPROPERTY(EditAnywhere) 让变量可以在 UE4 面板里修改。
        
    
-   **源文件 (.cpp)**：用来“做菜”，写具体实现。
    
    -   BeginPlay：初始化。
        
    -   NotifyActorOnClicked：**重写**了引擎的点击函数，实现了“扣血 -> 打印日志 -> 销毁”的逻辑。
        
    

#### B. 蓝图配置部分 (UE4 Editor)

-   **创建蓝图**：在 Content Browser 右键 -> Blueprint Class -> 搜索父类 BaseBuilding（注意：父类不能是默认的 Object，必须是我们写的 C++ 类，否则找不到组件）。
    
-   **设置模型**：点击 MeshComp -> 设置 Static Mesh 为 Cube。
    
-   **设置数值**：点击 (Self) -> 在 Details 面板找到我们暴露的 Stats -> 修改 MaxHealth。
    

#### C. 开启鼠标交互 (Level Blueprint)

默认 UE4 鼠标是隐藏的，我们在关卡蓝图里连线开启了它：

-   **逻辑流 (白线)**：BeginPlay -> Set Show Mouse Cursor -> Set Enable Click Events。
    
-   **数据流 (蓝线)**：Get Player Controller -> 连接到上述节点的 Target。
    

### 4\. 常见坑点 & 解决方案

-   **C++ 报错“未声明的标识符”**：通常是因为在 .cpp 里写了函数/变量，但忘了在 .h 里声明。
    
-   **蓝图里找不到 MeshComp**：检查蓝图右上角的**父类**。如果是 Parent: Object，说明创建错了。需要 File -> Reparent Blueprint -> 选 BaseBuilding。
    
-   **代码改了没反应**：VS 编译成功后，有时需要重启 UE4，或者在 VS 里按 Ctrl+F5 直接启动编辑器。
    

* * *

### 🚀 接下来的分工建议

基础环境已通，现在开始并行工作：

-   **成员 A (Core/Map)**：负责**地图格子系统**。创建一个纯 C++ 类 GridManager，用 STL vector 管理地图数据，实现坐标与格子的转换。
    
-   **成员 B (Unit/Logic)**：负责**战斗单位逻辑**。完善 NotifyActorOnClicked，把它改成通用的 TakeDamage 接口，设计兵种的继承关系。
    
-   **成员 C (UI/System)**：负责**可视化与系统**。研究 UMG (UI)，把屏幕左上角的黄字日志改成真正的血条显示。

